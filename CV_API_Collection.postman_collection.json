{
	"info": {
		"_postman_id": "e649d885-7885-4042-8a7a-7c65c1c9c0ce",
		"name": "CV API Collection",
		"description": "Authentication + CV endpoints for the resume builder API.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "15765892",
		"_collection_link": "https://universal-meadow-494559.postman.co/workspace/My-Workspace~7b079930-7ccd-457c-81fe-aa3380fe65dc/collection/15765892-e649d885-7885-4042-8a7a-7c65c1c9c0ce?action=share&source=collection_link&creator=15765892"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Register",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password\",\n  \"password_confirmation\": \"password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"register"
							]
						},
						"description": "Create a new user account. Automatically receives an API token in the response."
					},
					"response": []
				},
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@app.com\",\n  \"password\": \"123456789\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"login"
							]
						},
						"description": "Login with email & password. Copy the token field from the response into the `auth_token` collection variable."
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"logout"
							]
						},
						"description": "Invalidate the current token."
					},
					"response": []
				},
				{
					"name": "Me",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"me"
							]
						},
						"description": "Return the authenticated user's profile."
					},
					"response": []
				},
				{
					"name": "Forgot Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/forgot-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"forgot-password"
							]
						},
						"description": "Send a password reset email."
					},
					"response": []
				},
				{
					"name": "Verify Reset Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\",\n  \"token\": \"RESET_TOKEN_FROM_EMAIL\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/reset-token",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"reset-token"
							]
						},
						"description": "Validate a reset token before allowing the user to choose a new password."
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\",\n  \"token\": \"RESET_TOKEN_FROM_EMAIL\",\n  \"password\": \"new-password\",\n  \"password_confirmation\": \"new-password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/reset-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"reset-password"
							]
						},
						"description": "Reset the password using the emailed token."
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"// Try to get token from top-level or nested in data\r",
							"let jsonData = pm.response.json();\r",
							"let token = jsonData?.result?.token || null;\r",
							"\r",
							"if (token) {\r",
							"    pm.environment.set(\"auth_token\", token);\r",
							"    console.log(\"Token set in environment variable.\");\r",
							"} else {\r",
							"    console.warn(\"Token not found in response.\");\r",
							"}"
						]
					}
				}
			]
		},
		{
			"name": "CVs",
			"item": [
				{
					"name": "Create CV (Public)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"My Professional CV\",\n  \"language\": \"en\",\n  \"user_id\": null,\n  \"sections_order\": [\n    \"Personal Information\",\n    \"Skills\",\n    \"Education\",\n    \"Experience\",\n    \"Projects\",\n    \"Languages\",\n    \"Interests\"\n  ],\n  \"user_data\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"jobTitle\": \"Senior Flutter Developer\",\n    \"email\": \"john.doe@example.com\",\n    \"address\": \"123 Tech Street, San Francisco, CA 94105, USA\",\n    \"portfolioUrl\": \"https://johndoe.dev\",\n    \"phone\": \"+1-555-123-4567\",\n    \"summary\": \"Experienced Flutter developer with 5+ years of expertise in mobile app development. Passionate about creating beautiful, performant, and user-friendly applications. Strong background in cross-platform development, UI/UX design, and Agile methodologies.\",\n    \"birthdate\": \"1990-05-15\",\n    \"skills\": [\n      {\n        \"name\": \"Flutter\"\n      },\n      {\n        \"name\": \"Dart\"\n      },\n      {\n        \"name\": \"Laravel\"\n      },\n      {\n        \"name\": \"PHP\"\n      },\n      {\n        \"name\": \"JavaScript\"\n      },\n      {\n        \"name\": \"React\"\n      },\n      {\n        \"name\": \"Firebase\"\n      },\n      {\n        \"name\": \"SQL\"\n      },\n      {\n        \"name\": \"Git\"\n      },\n      {\n        \"name\": \"RESTful API\"\n      }\n    ],\n    \"educations\": [\n      {\n        \"institution\": \"University of California, Berkeley\",\n        \"degree\": \"Bachelor of Science\",\n        \"fieldOfStudy\": \"Computer Science\",\n        \"description\": \"Graduated magna cum laude. Specialized in software engineering and mobile application development. Relevant coursework included Data Structures, Algorithms, Database Systems, and Software Engineering Principles.\",\n        \"from\": \"2010-09\",\n        \"to\": \"2014-06\"\n      },\n      {\n        \"institution\": \"Stanford Continuing Studies\",\n        \"degree\": \"Certificate\",\n        \"fieldOfStudy\": \"Mobile App Development\",\n        \"description\": \"Advanced course covering modern mobile development practices, architecture patterns, and performance optimization.\",\n        \"from\": \"2018-01\",\n        \"to\": \"2018-06\"\n      }\n    ],\n    \"experiences\": [\n      {\n        \"position\": \"Senior Flutter Developer\",\n        \"company\": \"Tech Innovations Inc.\",\n        \"location\": \"San Francisco, CA\",\n        \"description\": \"Lead development of enterprise mobile applications serving 100K+ users. Architected scalable solutions, mentored junior developers, and collaborated with cross-functional teams. Improved app performance by 40% through code optimization and caching strategies.\",\n        \"from\": \"2021-03\",\n        \"to\": null,\n        \"current\": true\n      },\n      {\n        \"position\": \"Flutter Developer\",\n        \"company\": \"StartupXYZ\",\n        \"location\": \"San Francisco, CA\",\n        \"description\": \"Developed and maintained multiple Flutter applications from scratch. Implemented clean architecture patterns, RESTful API integration, and real-time features using Firebase. Delivered 3 major app releases on time.\",\n        \"from\": \"2019-06\",\n        \"to\": \"2021-02\",\n        \"current\": false\n      },\n      {\n        \"position\": \"Junior Mobile Developer\",\n        \"company\": \"Digital Solutions LLC\",\n        \"location\": \"Oakland, CA\",\n        \"description\": \"Built native and cross-platform mobile applications. Worked with React Native and later transitioned to Flutter. Collaborated with designers and backend developers to implement user-facing features.\",\n        \"from\": \"2017-08\",\n        \"to\": \"2019-05\",\n        \"current\": false\n      }\n    ],\n    \"projects\": [\n      {\n        \"title\": \"E-Commerce Mobile App\",\n        \"description\": \"A full-featured e-commerce mobile application built with Flutter. Features include user authentication, product catalog, shopping cart, payment integration (Stripe), order tracking, and push notifications. Used Firebase for backend services and state management with Provider.\",\n        \"technologies\": \"Flutter, Dart, Firebase, Stripe API, Provider, SQLite\",\n        \"url\": \"https://github.com/johndoe/ecommerce-app\",\n        \"from\": \"2022-01\",\n        \"to\": \"2022-12\",\n        \"current\": false\n      },\n      {\n        \"title\": \"Task Management App\",\n        \"description\": \"Cross-platform task management application with team collaboration features. Implemented real-time synchronization, offline mode, and intuitive UI/UX. The app supports multiple workspaces, task assignments, due dates, and notifications.\",\n        \"technologies\": \"Flutter, Dart, Firebase Firestore, BLoC Pattern, Local Storage\",\n        \"url\": \"https://github.com/johndoe/task-manager\",\n        \"from\": \"2021-06\",\n        \"to\": \"2021-11\",\n        \"current\": false\n      },\n      {\n        \"title\": \"Weather Forecast App\",\n        \"description\": \"Beautiful weather application with location-based forecasts, detailed weather maps, and weather alerts. Features include 7-day forecast, hourly updates, and beautiful animations. Integrated with OpenWeatherMap API.\",\n        \"technologies\": \"Flutter, Dart, OpenWeatherMap API, Location Services, Animations\",\n        \"url\": \"https://github.com/johndoe/weather-app\",\n        \"from\": \"2020-09\",\n        \"to\": \"2020-12\",\n        \"current\": false\n      }\n    ],\n    \"languages\": [\n      {\n        \"name\": \"English\",\n        \"proficiencyLevel\": 5\n      },\n      {\n        \"name\": \"Spanish\",\n        \"proficiencyLevel\": 3\n      },\n      {\n        \"name\": \"French\",\n        \"proficiencyLevel\": 2\n      }\n    ],\n    \"interests\": [\n      {\n        \"name\": \"Open Source Contributions\"\n      },\n      {\n        \"name\": \"Mobile UI/UX Design\"\n      },\n      {\n        \"name\": \"Reading Tech Blogs\"\n      },\n      {\n        \"name\": \"Photography\"\n      },\n      {\n        \"name\": \"Traveling\"\n      },\n      {\n        \"name\": \"Cooking\"\n      }\n    ]\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/cvs",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"cvs"
							]
						},
						"description": "Public endpoint. Auth token is optional; provide `user_id` if you want to associate an existing user."
					},
					"response": []
				},
				{
					"name": "Create CV (Minimal)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Minimal CV\",\n  \"language\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/cvs",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"cvs"
							]
						},
						"description": "Smallest payload allowed."
					},
					"response": []
				},
				{
					"name": "Get My CVs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/cvs?language=en",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"cvs"
							],
							"query": [
								{
									"key": "language",
									"value": "en",
									"description": "Optional filter"
								}
							]
						},
						"description": "Returns ONLY the authenticated user's CVs."
					},
					"response": []
				},
				{
					"name": "Get CV by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/cvs/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"cvs",
								":id"
							],
							"variable": [
								{
									"key": "id"
								}
							]
						},
						"description": "Fetch one CV owned by the authenticated user."
					},
					"response": []
				},
				{
					"name": "Update CV",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated CV Name\",\n  \"language\": \"ar\",\n  \"user_data\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe Updated\",\n    \"jobTitle\": \"Senior Flutter Dev\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/cvs/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"cvs",
								":id"
							],
							"variable": [
								{
									"key": "id"
								}
							]
						},
						"description": "Update fields on a CV you own."
					},
					"response": []
				},
				{
					"name": "Delete CV",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/cvs/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"cvs",
								":id"
							],
							"variable": [
								{
									"key": "id"
								}
							]
						},
						"description": "Soft delete a CV you own."
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"// Retrieve the value from the environment variable (e.g., \"originValue\")\r",
					"const access_token = pm.environment.get(\"auth_token\");\r",
					"\r",
					"// Add or update the Origin header for the current request\r",
					"pm.request.headers.add({\r",
					"    key: 'Authorization',\r",
					"    value: access_token ? `Bearer ${access_token}` : null\r",
					"});"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000"
		},
		{
			"key": "auth_token",
			"value": "",
			"description": "Set after logging in."
		}
	]
}
